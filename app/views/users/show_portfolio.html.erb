<!DOCTYPE html>


<body>
	
			<h2>Portfolio </h2>
			
			<form id="filter">
			  <fieldset>
				<!-- <label><input type="radio" name="type" value="all" checked="checked">All projects</label>
				<label><input type="radio" name="type" value="Solar">Solar</label>
				<label><input type="radio" name="type" value="Wind">Wind</label>
				<label><input type="radio" name="type" value="Hydro">Hydro</label> -->
				
				<input type="radio" id="radio1" name="type" value="all" checked="checked">
				<label for="radio1">All projects</label>
				<input type="radio" id="radio2" name="type" value="Solar">
				<label for="radio2">Solar</label>
				<input type="radio" id="radio3" name="type" value="Wind">
				<label for="radio3">Wind</label>
				<input type="radio" id="radio4" name="type" value="Hydro">
				<label for="radio4">Hydro</label>

			  </fieldset>
			</form>

			<ul id="proj-icons" class="image-grid">
				<% ind = 0 %>
				 <% for proj in current_user.projects %>
					<li data-id="id-<%= proj.id %>" data-type=<%=proj.project_kind %> >
						<div class=" project-icon" >
 							<%= link_to image_tag(proj.picture_url, :width => "128px", :height => "128px", :alt => "No picture"), {:controller => "projects", :action => "show", :selected_id => proj.id} %>
	
								<br>
							<strong><%=proj.name %></strong>
						</div>
					</li>
				<% end %>
			</ul>
			
			<script language="javascript" src="/assets/quicksand.js" type="text/javascript"></script>
			<script language="javascript" src="/assets/easing1-3.js" type="text/javascript"></script>



			<script>
				
				// DOMContentLoaded
				$(document).ready(function() { 
					  // bind radiobuttons in the form
					  var $filterType = $('#filter input[name="type"]');
			
					// get the first collection
					  var $current = $('#proj-icons');
					
					  // clone applications to get a second collection
					  var $data = $current.clone();
					  
					  // attempt to call Quicksand on every form change
					  $filterType.change(function(e) {
							console.log($("form input[type=radio]:checked").val() );
					        if ($("form input[type=radio]:checked").val() == 'all') {
							  var $filteredData = $data.find('li');
								console.log('all');
							} else if ($("form input[type=radio]:checked").val() == 'Solar') {						  
								 var $filteredData = $data.find('li[data-type=Solar]');
							}  else if ($("form input[type=radio]:checked").val() == 'Wind') {						 
								 var $filteredData = $data.find('li[data-type=Wind]');
							}
							else if ($("form input[type=radio]:checked").val() == 'Hydro') {						 
								 var $filteredData = $data.find('li[data-type=Hydro]');
							}
							console.log($current);
							console.log($filteredData);

							// finally, call quicksand
							$current.quicksand($filteredData, {
								duration: 1500,
								easing: 'easeInOutQuad'
							});
							
					  });

				});

			</script>
			
			<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
     google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawCharts);
      function drawCharts() {
       var data_1 = google.visualization.arrayToDataTable([
          ['Project type', 'Number of projects'],
          ['Solar',     6],
          ['Wind',      3],
          ['Hydro',  2],
          ['Other', 2],
        ]);

        var options_1 = {
          title: 'Projects by type',
          is3D: true,
        };
		
		  var data_2 = google.visualization.arrayToDataTable([
          ['Project geography', 'Number of projects'],
          ['North America',     6],
          ['Europe',      5],
          ['Centeral America',  2],
          ['Middle east', 2],
		   ['Africa', 1],
		   ['Asia', 1],
        ]);

        var options_2 = {
          title: 'Projects by geography',
          is3D: true,
        }; 
		
		 var data_3 = google.visualization.arrayToDataTable([
          ['Year', 'East Wind', 'Mahaby Solar', 'Delhi recycle', 'Pacific hydro'],
          ['2013',  50000,      0, 10000, 60000],
          ['2014',  52500,      0, 12000, 60000],
          ['2015',  55000,       20000, 14000, 72000],
          ['2016',  57500,      22000, 0, 80000]
        ]);

        var options_3 = {
          title: 'Total income',
          hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
          vAxis: {minValue: 0},
		  isStacked: true

        };


        var chart_1 = new google.visualization.PieChart(document.getElementById('piechart_type'));
        chart_1.draw(data_1, options_1);
		 var chart_2 = new google.visualization.PieChart(document.getElementById('piechart_geo'));
        chart_2.draw(data_2, options_2);
		 var chart_3 = new google.visualization.AreaChart(document.getElementById('area_income'));
        chart_3.draw(data_3, options_3);
		
		
      }

	 </script>
			
	<div class="empty-buffer"> </div>
			
	<div class="portfolio">
	<div class="row-fluid">
		<div class="span10">		
			
			
			<table class="table table-striped table-condensed">
				<thead>
				  <tr>
					  <th>Project</th>
					  <th>Funding status</th>
					  <th>Annual return</th>
					  <th>Comments</th>  
					  <th>Contact</th>  
					  <th></th>  					  
				  </tr>
			  </thead>   
			  <tbody>
			 <% for proj in current_user.projects %>
				 <tr>
						<td>
							<%= link_to proj.name, {:controller => "projects", :action => "show", :selected_id => proj.id} %>
						</td>
						<% if proj.fully_funded %>
							<td><span class="label label-success">Funded</span></td>
						<% else %>
							<% remaining_time = proj.end_date.to_date - Date.today %>
							<% if remaining_time > 0 %>
									<td><span class="label label-warning"><%= remaining_time.to_i %> days left</span>
										<% if remaining_time < 14 %>
											<div class="social-project">
												<a href="#"><img src="../assets/socials/facebook.png" alt="facebook" /></a>
												<a href="#"><img src="../assets/socials/twitter.png" alt="twitter" /></a>
												<a href="#"><img src="../assets/socials/youtube.png" alt="youtube" /></a>
											</div>
										<% end %>
									</td>
							<% else %>
										<td><span class="label label-important">Not Funded</span></td>
							<% end %>
						<% end %>

						<td>12%</td>
						<!-- <td>Talk to John and see how they are doing <a href="#" class="btn"><i class="icon-trash"></i></a> <br>
							<a href="#" class="btn"><i class="icon-pencil"></i></a> 
						</td>-->
						<td></td>
						<td><a href="static_pages/contact_company" class="btn"><i class="icon-envelope"></i></a></td>
						<td></td>
				 </tr>
			 <% end %>	
			</tbody>
		</table>
	</div>	

		
	
<div class="span12">	
    <div class="span5" id="piechart_type" style="width: 900px; height: 500px;"></div>
	<div class="span5" id="piechart_geo" style="width: 900px; height: 500px;"></div>
	<div class="span5" id="area_income" style="width: 900px; height: 500px;"></div>

		
		
		<!-- <div class="span8">		
			<h2>Statistics </h2>
					<div class="span12 graph">	
						<h4>Projected annual returns</h4>
						<canvas id="proj_revenue"></canvas>
					</div>
				<div class="row-fluid">
					<div class="span4 graph">	
						<h4>Project by type</h4>
						<canvas id="proj_type_pie"></canvas>
					</div>
					<div class="span4 graph">	
						<h4>Project by geography</h4>
						<canvas id="proj_geo_pie"></canvas>
					</div>
					
				</div>
				
				<script>
					window.onload = function () {
					
					      var bluffGraph = new Bluff.Pie('proj_type_pie', '350x350');
						  //Use keynote theme. Several other themes can be used
						  bluffGraph.theme_37signals();
						  
						 
						  bluffGraph.data('Wind', 3);
						  bluffGraph.data('Others', 1);
						  bluffGraph.data('Solar', 5);
						   
						  //Finally draw the chart
						  //bluffGraph.draw();
						  
						  
						  
						  //Create pie chart
						  var bluffGraph = new Bluff.Pie('proj_geo_pie', '350x350');
						  //Use keynote theme. Several other themes can be used
						  bluffGraph.theme_37signals();
		  
						  bluffGraph.data('Asia', 1);
						  bluffGraph.data('USA', 4);
						  bluffGraph.data('Europe', 3);
						  bluffGraph.data('Centeral America', 1);
						  bluffGraph.data('Africa', 1);

						  //Finally draw the chart
						  //bluffGraph.draw();
						  
						   //Create pie chart
						  var bluffGraph = new Bluff.StackedArea('proj_revenue', '700x350');
						  //Use keynote theme. Several other themes can be used
						  bluffGraph.theme_37signals();
		  
						  bluffGraph.data('East Wind', [50000, 52500, 55000, 57500, 60000,60000,60000,60000,0,0]);
						  bluffGraph.data('Mahaby Solar', [0, 0, 20000, 20000, 20000,20000, 20000, 20000, 20000, 20000]);
						  bluffGraph.data('Delhi recycle', [10000, 12000, 14000, 0, 0,0, 0,0, 0,0]);
						  bluffGraph.data('Pacific hydro', [60000, 60000,72000,80000,88000,100000,110000,110000,110000,110000]);
						  bluffGraph.labels = {0: '2014', 1: '2015', 2: '2016', 3: '2017', 4: '2018',5: '2019', 6: '2020',7: '2021', 8: '2022',9: '2023'};

						  //Finally draw the chart
						  //bluffGraph.draw();
						  
					}			
				</script>		
			
		</div>
	
				<script language="javascript" src="/assets/bluff/js-class.js" type="text/javascript"></script>
				<script language="javascript" src="/assets/bluff/bluff-min.js" type="text/javascript"></script>
				<!--[if IE]><script language="javascript" src="/js/bluff/excanvas.js" type="text/javascript"></script><![endif]-->
		</div>
	</div>
	</div> 

</body>